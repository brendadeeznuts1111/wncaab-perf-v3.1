# wrangler.toml - NowGoal WebSocket Worker

name = "nowgoal-ws"
main = "index.ts"
compatibility_date = "2024-11-11"
compatibility_flags = ["nodejs_compat"]

# Environment variables
[vars]
TES_SUPPORTED_SUBPROTOCOLS = "tes-ui-v1,tes-ui-v2"
NOWGOAL_WS_URL = "wss://www.nowgoal26.com:9800/stream"

# Production environment
[env.production]
name = "nowgoal-ws-prod"

[env.production.vars]
TES_SUPPORTED_SUBPROTOCOLS = "tes-ui-v1,tes-ui-v2"
NOWGOAL_WS_URL = "wss://www.nowgoal26.com:9800/stream"

# Staging environment
[env.staging]
name = "nowgoal-ws-staging"

[env.staging.vars]
TES_SUPPORTED_SUBPROTOCOLS = "tes-ui-v1,tes-ui-v2"
NOWGOAL_WS_URL = "wss://www.nowgoal26.com:9800/stream"

# Secrets (set via: wrangler secret put)
# CSRF_SECRET - CSRF token secret (required)

# Custom domain route (if configured)
# [[routes]]
# pattern = "nowgoal.tes-framework.com/*"
# zone_name = "tes-framework.com"

# Build configuration
[build]
command = "bun build index.ts --outdir dist --target bun --minify"

