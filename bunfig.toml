# bunfig.toml - BUN Macro Core v1.4 + Remote Index v14.2

# Bun v1.3.2 Immunity: Explicit linker/auto config for breaking change protection
[IMMUNITY:hoisted-disable] # Grepable: immunity-hoisted-disable

[build]
# Enable macro processing (Bun 1.4+)
macros = true
# External dependencies (no vendor lock-in)
external = ["bun:fetch"]
# Trust Cloudflare KV and Bun crypto APIs for P88-PandBet high-value feeds
trust = ["cloudflare:kv", "bun:crypto", "bun:array", "bun:fetch"]

[minify]
# Enable syntax minification for DCE post-inlining
syntax = true

[remote]
# Remote index URL (must be HTTPS)
index = "https://cdn.syndicate.com/wncaab-index.txt"

# Local fallback index path
fallback = "./.scan.index"

# Enable URL validation
validation = true

# Timeout for remote fetch (milliseconds) - P1: Default 30s for production hardening
timeout = 30000

[debug]
editor = "code"

[run]
# Preload WASM models before first request
# Note: Create ./src/ai/warmup.ts to preload ONNX models and WASM modules
preload = ["./src/ai/warmup.ts"]

[test]
# Run tests with worker isolation
coverage = true

[install]
# Faster installs for CI
exact = true
